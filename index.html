<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>"Welcome back!</title>
</head>
<body>
<h1>welcome back !</h1>

    email:<br>
    <input type="text" id="email" name="email">
    <br>
    password:<br>
    <input type="text" id="password" name="password">
    <br><br>
    <input type="button" value="Submit" onclick = verifyUserFromDB()>
    <input type="button" value="SignUp" onclick = window.open('signup.html')>



</body>


<script>


    function createCORSRequest(method, url) {
        var xhr = new XMLHttpRequest();
        if ("withCredentials" in xhr) {
            // Check if the XMLHttpRequest object has a "withCredentials" property.
            // "withCredentials" only exists on XMLHTTPRequest2 objects.
            xhr.open(method, url, true);

        } else if (typeof XDomainRequest != "undefined") {
            // Otherwise, check if XDomainRequest.
            // XDomainRequest only exists in IE, and is IE's way of making CORS requests.
            xhr = new XDomainRequest();
            xhr.open(method, url);
        } else {
            // Oth79.177.106.151erwise, CORS is not supported by the browser.
            xhr = null;

        }
        return xhr;
    }


    function verifyUserFromDB(){

        email = document.getElementById("email").value

        password = document.getElementById("password").value

        urlRequest = "http://ec2-54-197-26-147.compute-1.amazonaws.com:3000/verify?email=" + email + "&password=" +password
        var xhr = createCORSRequest('GET', urlRequest);
        if (!xhr) {
            throw new Error('CORS not supported');
        }

        xhr.onload = function() {
            var responseText = xhr.responseText;
            if(responseText === "true"){
                location.replace("lectures.html?user=" + email)
                //window.open("lectures.html?user=" + email)
            }else{
                alert("the email ad password are mismatched")
            }
        };

        xhr.send();

    }



</script>
</html>